
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KPIlytics Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <header>
    <button class="menu-toggle" onclick="toggleSidebar()">☰</button>
    <div class="logo">KPIlytics</div>
    <div class="top-right-icons">
      <svg onclick="toggleSettings()" class="settings-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
        <path d="M6.455 1.45A.5.5 0 0 1 6.952 1h2.096a.5.5 0 0 1 .497.45l.186 1.858a4.996..."/>
      </svg>
      <svg onclick="toggleUserMenu()" class="user-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor">
        <path d="M10 5a2 2 0 1 1-4 0 2 2 0 0 1 4 0ZM4 10a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1H4v-1Z"/>
      </svg>
    </div>
    <div id="settings-menu" class="menu hidden">
      <a href="#">Einstellungen</a><br />
      <a href="#">Benutzer verwalten</a>
    </div>
    <div id="user-menu" class="menu hidden">
      <label><input type="checkbox" id="logout-switch"> Ausloggen</label>
    </div>
    <div id="sidebar" class="sidebar hidden">
      <ul>
        <li><svg class="icon" ...></svg> Datei Upload</li>
        <li><svg class="icon" ...></svg> Detailansicht</li>
        <li><svg class="icon" ...></svg> Feedback</li>
      </ul>
    </div>
  </header>

  <main class="main-content">
    <div class="chart-header">
      <select>
        <option>Rezeption</option>
        <option>Restaurant</option>
      </select>
      <select>
        <option>ADR</option>
        <option>RevPAR</option>
      </select>
      <label><input type="checkbox" checked> Benchmark anzeigen</label>
    </div>
    <div class="chart-container">
      <canvas id="kpiChart"></canvas>
    </div>
  </main>

  <footer>
    <a href="#">Impressum</a>
    <a href="#">AGB</a>
    <a href="#">Kontakt</a>
  </footer>

  <script src="dashboard.js" defer></script>
</body>
</html>
"""

dashboard_js = """
document.addEventListener("DOMContentLoaded", function () {
  const ctx = document.getElementById("kpiChart").getContext("2d");
  const kpiChart = new Chart(ctx, {
    type: "line",
    data: {
      labels: ["Jan", "Feb", "Mär", "Apr", "Mai"],
      datasets: [
        {
          label: "ADR",
          data: [120, 130, 125, 140, 135],
          borderColor: "#3d1562",
          backgroundColor: "transparent",
          tension: 0.4,
          pointRadius: 5,
          pointHoverRadius: 7
        },
        {
          label: "ADR Benchmark",
          data: [115, 125, 122, 130, 128],
          borderColor: "#3d156255",
          borderDash: [5, 5],
          backgroundColor: "transparent",
          tension: 0.4,
          pointRadius: 5,
          pointHoverRadius: 7
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: "top"
        },
        title: {
          display: false
        }
      }
    }
  });
});

// Menüfunktionen
function toggleSidebar() {
  const sidebar = document.getElementById("sidebar");
  if (sidebar) sidebar.classList.toggle("hidden");
}
function toggleSettings() {
  document.getElementById("settings-menu").classList.toggle("hidden");
}
function toggleUserMenu() {
  document.getElementById("user-menu").classList.toggle("hidden");
}
document.getElementById("logout-switch").addEventListener("change", function () {
  if (this.checked) {
    window.location.href = "index.html";
  }
});
"""

# CSS wird wiederverwendet, vorhandene Datei verwenden
os.makedirs(dashboard_dir, exist_ok=True)
with open(os.path.join(dashboard_dir, "dashboard.html"), "w") as f:
    f.write(dashboard_html)
with open(os.path.join(dashboard_dir, "dashboard.js"), "w") as f:
    f.write(dashboard_js)

# Archiv erstellen
dashboard_zip_path = "/mnt/data/dashboard_final_package.zip"
with ZipFile(dashboard_zip_path, "w") as zipf:
    zipf.write(os.path.join(dashboard_dir, "dashboard.html"), arcname="dashboard.html")
    zipf.write(os.path.join(dashboard_dir, "dashboard.js"), arcname="dashboard.js")

dashboard_zip_path
